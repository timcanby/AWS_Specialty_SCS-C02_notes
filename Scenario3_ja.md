<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**

- [AWS EC2 Ã— SSMï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒ—ãƒ­ã‚»ã‚¹ã®å®‰å…¨è¨­è¨ˆï¼ˆãƒ¡ãƒ¢ãƒªä¿æŒã¨éš”é›¢ï¼‰](#aws-ec2-%C3%97-ssm%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%82%A4%E3%83%B3%E3%82%B7%E3%83%87%E3%83%B3%E3%83%88%E5%AF%BE%E5%BF%9C%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%81%AE%E5%AE%89%E5%85%A8%E8%A8%AD%E8%A8%88%E3%83%A1%E3%83%A2%E3%83%AA%E4%BF%9D%E6%8C%81%E3%81%A8%E9%9A%94%E9%9B%A2)
  - [ğŸ“˜ Scenarioï¼ˆã‚·ãƒŠãƒªã‚ªï¼‰](#-scenario%E3%82%B7%E3%83%8A%E3%83%AA%E3%82%AA)
  - [ğŸ” Investigation Workflowï¼ˆèª¿æŸ»ãƒ•ãƒ­ãƒ¼ã®å…¨ä½“åƒï¼‰](#-investigation-workflow%E8%AA%BF%E6%9F%BB%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AE%E5%85%A8%E4%BD%93%E5%83%8F)
  - [ğŸ›¡ï¸ Isolation Strategyï¼ˆéš”é›¢æˆ¦ç•¥ï¼‰](#-isolation-strategy%E9%9A%94%E9%9B%A2%E6%88%A6%E7%95%A5)
    - [Termination Protection ã¨ã¯ï¼Ÿ](#termination-protection-%E3%81%A8%E3%81%AF)
  - [ğŸ”§ Security Group æ›´æ–°ãƒã‚¤ãƒ³ãƒˆ](#-security-group-%E6%9B%B4%E6%96%B0%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88)
  - [ğŸš€ Systems Manager Run Command ã§æ®ç™ºæ€§ãƒ‡ãƒ¼ã‚¿åé›†](#-systems-manager-run-command-%E3%81%A7%E6%8F%AE%E7%99%BA%E6%80%A7%E3%83%87%E3%83%BC%E3%82%BF%E5%8F%8E%E9%9B%86)
    - [ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹ï¼ˆLinuxï¼‰](#%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E4%BE%8Blinux)
    - [å®Ÿè¡Œæ‰‹é †](#%E5%AE%9F%E8%A1%8C%E6%89%8B%E9%A0%86)
      - [âœ… SSM Run Command ãŒ SSH/RDP ã‚ˆã‚Šå„ªã‚Œã‚‹ç‚¹](#-ssm-run-command-%E3%81%8C-sshrdp-%E3%82%88%E3%82%8A%E5%84%AA%E3%82%8C%E3%82%8B%E7%82%B9)
  - [ğŸ’¾ EBS ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ & ã‚¿ã‚°ä»˜ã‘](#-ebs-%E3%83%9C%E3%83%AA%E3%83%A5%E3%83%BC%E3%83%A0%E3%81%AE%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88--%E3%82%BF%E3%82%B0%E4%BB%98%E3%81%91)
    - [ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆã‚³ãƒãƒ³ãƒ‰](#%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E4%BD%9C%E6%88%90%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89)
    - [ã‚¿ã‚°ä¾‹](#%E3%82%BF%E3%82%B0%E4%BE%8B)
  - [ğŸ› ï¸ ä¾µå®³ã‚·ãƒŠãƒªã‚ªã®å…·ä½“ä¾‹ã¨å¯¾å‡¦](#-%E4%BE%B5%E5%AE%B3%E3%82%B7%E3%83%8A%E3%83%AA%E3%82%AA%E3%81%AE%E5%85%B7%E4%BD%93%E4%BE%8B%E3%81%A8%E5%AF%BE%E5%87%A6)
  - [ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#-%E3%82%BB%E3%82%AD%E3%83%A5%E3%83%AA%E3%83%86%E3%82%A3%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%88)
  - [â“ ãªãœ **Systems Manager Run Command** ã‚’ä½¿ç”¨ã—ã¦æ®ç™ºæ€§ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã™ã‚‹ã®ã‹](#-%E3%81%AA%E3%81%9C-systems-manager-run-command-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E6%8F%AE%E7%99%BA%E6%80%A7%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92%E5%8F%8E%E9%9B%86%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B)
    - [Run Command ã®ãƒ¡ãƒªãƒƒãƒˆ](#run-command-%E3%81%AE%E3%83%A1%E3%83%AA%E3%83%83%E3%83%88)
    - [D. ãªãœ **SSH / RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³** ã§ã¯ãªã„ã®ã‹](#d-%E3%81%AA%E3%81%9C-ssh--rdp-%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3-%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B)
  - [â“ ãªãœ **F. State Manager Association** ã‚’ä½¿ã‚ãšã€**E. create-snapshot** ã‚’æ¡ç”¨ã™ã‚‹ã®ã‹](#-%E3%81%AA%E3%81%9C-f-state-manager-association-%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%9Ae-create-snapshot-%E3%82%92%E6%8E%A1%E7%94%A8%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8B)
  - [âŒ ãªãœã‚ªãƒ—ã‚·ãƒ§ãƒ³ **B / D / F** ã¯æœ€é©ã§ã¯ãªã„ã®ã‹ï¼Ÿ](#-%E3%81%AA%E3%81%9C%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-b--d--f-%E3%81%AF%E6%9C%80%E9%81%A9%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84%E3%81%AE%E3%81%8B)
    - [ã‚ªãƒ—ã‚·ãƒ§ãƒ³ B: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’éš”é›¢ã‚µãƒ–ãƒãƒƒãƒˆã«ç§»å‹•](#%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-b-%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%82%92%E9%9A%94%E9%9B%A2%E3%82%B5%E3%83%96%E3%83%8D%E3%83%83%E3%83%88%E3%81%AB%E7%A7%BB%E5%8B%95)
    - [ã‚ªãƒ—ã‚·ãƒ§ãƒ³ D: SSH / RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ](#%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-d-ssh--rdp-%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A7%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E5%AE%9F%E8%A1%8C)
    - [ã‚ªãƒ—ã‚·ãƒ§ãƒ³ F: State Manager Association ã§ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç”Ÿæˆ](#%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3-f-state-manager-association-%E3%81%A7%E3%82%B9%E3%83%8A%E3%83%83%E3%83%97%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%E7%94%9F%E6%88%90)
  - [ğŸ“š è£œè¶³ï¼šRDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ï¼ŸRun Command / State Manager ã®ä»£è¡¨çš„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹](#-%E8%A3%9C%E8%B6%B3rdp-%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%81%AFrun-command--state-manager-%E3%81%AE%E4%BB%A3%E8%A1%A8%E7%9A%84%E3%83%A6%E3%83%BC%E3%82%B9%E3%82%B1%E3%83%BC%E3%82%B9)
    - [ğŸ”¹ RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯](#-rdp-%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%81%A8%E3%81%AF)
    - [ğŸ”¹ Run Command ãŒæ´»èºã™ã‚‹ãã®ä»–ã‚·ãƒŠãƒªã‚ª](#-run-command-%E3%81%8C%E6%B4%BB%E8%BA%8D%E3%81%99%E3%82%8B%E3%81%9D%E3%81%AE%E4%BB%96%E3%82%B7%E3%83%8A%E3%83%AA%E3%82%AA)
    - [ğŸ”¹ Systems Manager **State Manager** ã®ä¸»ãªç”¨é€”](#-systems-manager-state-manager-%E3%81%AE%E4%B8%BB%E3%81%AA%E7%94%A8%E9%80%94)
      - [Association ã‚’ä½œæˆã™ã‚‹ã¨ã¯ï¼Ÿ](#association-%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E3%81%A8%E3%81%AF)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->


# AWS EC2 Ã— SSMï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒ—ãƒ­ã‚»ã‚¹ã®å®‰å…¨è¨­è¨ˆï¼ˆãƒ¡ãƒ¢ãƒªä¿æŒã¨éš”é›¢ï¼‰

---

## ğŸ“˜ Scenarioï¼ˆã‚·ãƒŠãƒªã‚ªï¼‰

AWS Systems Managerï¼ˆSSM Agentï¼‰ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ Amazon EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä¾µå®³ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚‹ã€‚  
ã™ã¹ã¦ã® EC2 ã¯ Amazon EBS ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§å‹•ä½œã—ã¦ãŠã‚Šã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åœæ­¢ã›ãšã« **ä»¥ä¸‹ã®è¦ä»¶** ã‚’æº€ãŸã—ãªãŒã‚‰ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ï¼š

1. ğŸ”’ **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ®ç™ºæ€§ãƒ¡ãƒ¢ãƒªï¼ˆRAMï¼‰ã¨éæ®ç™ºæ€§ãƒ¡ãƒ¢ãƒªï¼ˆEBSï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒ**ã™ã‚‹ã“ã¨  
2. ğŸ·ï¸ **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã«ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒã‚±ãƒƒãƒˆæƒ…å ±ã‚’ã‚¿ã‚°ã¨ã—ã¦è¿½åŠ **ã™ã‚‹ã“ã¨  
3. ğŸ”— **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³çŠ¶æ…‹ã‚’ç¶­æŒã—ãªãŒã‚‰ã‚‚ã€ãƒãƒ«ã‚¦ã‚§ã‚¢æ‹¡æ•£ã‚’é˜²ããŸã‚ã«éš”é›¢**ã™ã‚‹ã“ã¨  
4. ğŸ“ **RAM å–å¾—ãªã©èª¿æŸ»ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’å®Œå…¨ã«ãƒ­ã‚°è¨˜éŒ²**ã™ã‚‹ã“ã¨  

---

## ğŸ” Investigation Workflowï¼ˆèª¿æŸ»ãƒ•ãƒ­ãƒ¼ã®å…¨ä½“åƒï¼‰

1. **æ¤œçŸ¥**  
   - GuardDuty / CloudTrail / EDR ãªã©ã§ä¸å¯©ãªæŒ™å‹•ã‚’æ¤œå‡º  
2. **åˆæœŸãƒˆãƒªã‚¢ãƒ¼ã‚¸**  
   - è©²å½“ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ ID ã¨ VPCï¼ã‚µãƒ–ãƒãƒƒãƒˆã‚’ç¢ºèª  
   - é‡è¦åº¦ãƒ»å½±éŸ¿ç¯„å›²ã‚’åˆ¤æ–­ã—ã€ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒã‚±ãƒƒãƒˆã‚’ç™ºè¡Œ  
3. **éš”é›¢ & ä¿å…¨**  
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—æ›´æ–° + ASG/ELB ã‹ã‚‰ãƒ‡ã‚¿ãƒƒãƒ  
   - Termination Protection ã‚’æœ‰åŠ¹åŒ–ã—ã¦èª¤å‰Šé™¤ã‚’äºˆé˜²  
4. **æ®ç™ºæ€§ãƒ‡ãƒ¼ã‚¿å–å¾—**  
   - SSM Run Command ã§ RAM/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/ãƒ—ãƒ­ã‚»ã‚¹æƒ…å ±ã‚’åé›†  
5. **ãƒ‡ã‚£ã‚¹ã‚¯ä¿å…¨**  
   - EBS ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—ã—ã€ã‚¿ã‚°ã‚’ä»˜ä¸  
6. **è©³ç´°è§£æ**  
   - Snapshot ã‚’åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼åˆ¥ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã‚³ãƒ”ãƒ¼ã—ã€æ¤œä½“ã‚’ãƒã‚¦ãƒ³ãƒˆ  
7. **æ ¹æœ¬åŸå› ç‰¹å®š & å°ã˜è¾¼ã‚**  
   - IAM ã‚­ãƒ¼æ¼æ´©ãƒ»è„†å¼±æ€§ãƒ»ãƒãƒ«ã‚¦ã‚§ã‚¢ç¨®é¡ã‚’ç‰¹å®š  
8. **å¾©æ—§ & äº‹å¾Œå¯¾å¿œ**  
   - AMI å†æ§‹ç¯‰ã€ãƒ‘ãƒƒãƒé©ç”¨ã€æ¤œå‡ºãƒ«ãƒ¼ãƒ«æ”¹å–„  

---

## ğŸ›¡ï¸ Isolation Strategyï¼ˆéš”é›¢æˆ¦ç•¥ï¼‰

| éš”é›¢å¯¾è±¡ | ç›®çš„ | å…·ä½“çš„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|---------|------|----------------|
| **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡** | æ„ŸæŸ“æ‹¡å¤§ãƒ»C2 é€šä¿¡ã‚’é®æ–­ | åˆ¶é™å°‚ç”¨ SG ã¸ä»˜æ›¿ãˆ or é€å—ä¿¡ã‚¼ãƒ­ã®éš”é›¢ã‚µãƒ–ãƒãƒƒãƒˆã¸ç§»å‹• |
| **Auto Scaling Group** | è‡ªå‹•å¾©æ—§ã«ã‚ˆã‚‹æ±šæŸ“æ‹¡æ•£ã‚’é˜²æ­¢ | `detach-instances --should-decrement-desired-capacity` |
| **Elastic Load Balancer** | æ±šæŸ“ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’é¡§å®¢ã¸æµã•ãªã„ | `deregister-instances-from-load-balancer` |
| **Lifecycle æ“ä½œ** | èª¤åœæ­¢ãƒ»èª¤çµ‚äº†ã‚’é˜²ã | **Termination Protection** ã‚’æœ‰åŠ¹åŒ– (`modify-instance-attribute --disable-api-termination false`) |

### Termination Protection ã¨ã¯ï¼Ÿ

EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã® **èª¤ã£ãŸ Stop ã‚„ Terminate ã‚’é˜²æ­¢** ã™ã‚‹ãƒ•ãƒ©ã‚°ã€‚  
- èª¿æŸ»ä¸­ã«ä»–ãƒãƒ¼ãƒ ãŒèª¤ã£ã¦ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã—è¨¼æ‹ ãŒå¤±ã‚ã‚Œã‚‹ãƒªã‚¹ã‚¯ã‚’å›é¿ã€‚  
- è§£é™¤ã«ã¯æ˜ç¤ºçš„ãªå±æ€§å¤‰æ›´ãŒå¿…è¦ã§ã€ç›£æŸ»ãƒ­ã‚°ãŒæ®‹ã‚‹ã€‚

---

## ğŸ”§ Security Group æ›´æ–°ãƒã‚¤ãƒ³ãƒˆ

| ãƒãƒ¼ãƒˆ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | éš”é›¢å¾Œã®æ¨å¥¨è¨­å®š |
|-------|-----------|----------------|
| 22 / 3389 | ç¤¾å†… IP ãªã©è¨±å¯ | **å…¨æ‹’å¦** ï¼ˆSSM ã¯ 443/TCP ã‚’ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ã§åˆ©ç”¨ï¼‰ |
| 80 / 443 | ãƒ¦ãƒ¼ã‚¶å‘ã‘å…¬é–‹ | **å…¨æ‹’å¦** |
| ãã®ä»–ã‚¢ãƒ—ãƒª | è¦ä»¶ã«å¿œã˜è¨±å¯ | **å…¨æ‹’å¦** |

> **ãƒã‚¤ãƒ³ãƒˆ:** SSM Agent ã¯ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ HTTPS(443) ã§ Systems Manager ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸æ¥ç¶šã™ã‚‹ãŸã‚ã€**ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ã¯ã™ã¹ã¦ 0** ã«ã—ã¦ã‚‚ç®¡ç†æ“ä½œã¯å¯èƒ½ã€‚

---

## ğŸš€ Systems Manager Run Command ã§æ®ç™ºæ€§ãƒ‡ãƒ¼ã‚¿åé›†

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¾‹ï¼ˆLinuxï¼‰

```bash
commands=(
  "echo '### Date' && date -u"
  "echo '### Uptime' && uptime"
  "echo '### Memory' && cat /proc/meminfo"
  "echo '### Netstat' && netstat -pantue"
  "echo '### Process' && ps aux --sort=-%mem | head -n 30"
)
```

### å®Ÿè¡Œæ‰‹é †

1. **S3 ãƒã‚±ãƒƒãƒˆ** `forensic-logs-bucket` ã‚’äº‹å‰ä½œæˆã—ã€æš—å·åŒ–ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’æœ‰åŠ¹åŒ–  
2. **Run Command ç™ºè¡Œ**

```bash
aws ssm send-command   --instance-ids "i-xxxxxxxx"   --document-name "AWS-RunShellScript"   --comment "Forensic RAM dump INC-123456"   --parameters "{"commands":["${commands[*]}"]}"   --output-s3-bucket-name "forensic-logs-bucket"   --output-s3-key-prefix "INC-123456/volatile"
```

3. **CloudWatch Logs** or **S3** ã§å‡ºåŠ›ç¢ºèª  
4. å–å¾—ã‚³ãƒãƒ³ãƒ‰ãƒ»å®Ÿè¡Œè€…ãƒ»ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯ SSM / CloudTrail ã«è‡ªå‹•è¨˜éŒ²

#### âœ… SSM Run Command ãŒ SSH/RDP ã‚ˆã‚Šå„ªã‚Œã‚‹ç‚¹

| é …ç›® | SSM Run Command | æ‰‹å‹• SSH/RDP |
|------|-----------------|--------------|
| ç›£æŸ»ãƒ­ã‚° | è‡ªå‹•ã§ CloudTrail è¨˜éŒ² | OS ãƒ­ã‚°ä¸ååˆ†ï¼åˆ¥é€”è¨­å®š |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¦ä»¶ | ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ 0ã€ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ 443 ã®ã¿ | ãƒãƒ¼ãƒˆé–‹æ”¾ãŒå¿…è¦ |
| ã‚¹ã‚¯ãƒªãƒ—ãƒˆè‡ªå‹•åŒ– | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãƒ»å†åˆ©ç”¨å¯èƒ½ | æ‰‹å‹•ã‚³ãƒ”ãƒ¼ãƒ»å®Ÿè¡ŒãƒŸã‚¹ãƒªã‚¹ã‚¯ |
| IAM çµ±åˆ | Least Privilege CLI æ¨©é™ | éµç®¡ç†ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…±æœ‰ãŒèª²é¡Œ |
| é‹ç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ | ä½ï¼ˆæ•°ã‚¯ãƒªãƒƒã‚¯ï¼‰ | é«˜ï¼ˆè¸ã¿å°è¨­å®šã€éµé…å¸ƒï¼‰ |

---

## ğŸ’¾ EBS ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ & ã‚¿ã‚°ä»˜ã‘

### ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆã‚³ãƒãƒ³ãƒ‰

```bash
SNAP_ID=$(aws ec2 create-snapshot   --volume-id vol-xxxxxxxx   --description "INC-123456 Evidence Snapshot"   --query 'SnapshotId' --output text)
```

### ã‚¿ã‚°ä¾‹

```bash
aws ec2 create-tags --resources "$SNAP_ID" i-xxxxxxxx vol-xxxxxxxx   --tags Key=IncidentTicket,Value=INC-123456          Key=Owner,Value=SecurityTeam          Key=Evidence,Value=Yes
```

> **å®Ÿä¾‹:**  
> - **ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢æ„ŸæŸ“**ï¼šæ”»æ’ƒè€…ã®æš—å·åŒ–ãƒ„ãƒ¼ãƒ«ã‚’ãƒ‡ã‚£ã‚¹ã‚¯å†…ã§æ¤œå‡º  
> - **ã‚³ã‚¤ãƒ³ãƒã‚¤ãƒŠãƒ¼**ï¼šä¸æ­£ãƒã‚¤ãƒŠãƒªã‚„ crontab ã«æ®‹ã‚‹ C2 æƒ…å ±ã‚’ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰è§£æ  

ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ **åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ / åˆ¥ãƒªãƒ¼ã‚¸ãƒ§ãƒ³** ã«ã‚³ãƒ”ãƒ¼ã™ã‚Œã°ã€æ”»æ’ƒè€…ã«ã‚ˆã‚‹å‰Šé™¤ãƒªã‚¹ã‚¯ã‚‚è»½æ¸›ã€‚

---

## ğŸ› ï¸ ä¾µå®³ã‚·ãƒŠãƒªã‚ªã®å…·ä½“ä¾‹ã¨å¯¾å‡¦

| ä¾µå®³ã‚¿ã‚¤ãƒ— | å…†å€™ | éš”é›¢ç†ç”± | è¿½åŠ å¯¾ç­– |
|-----------|------|----------|---------|
| **CoinMiner** | CPU ä½¿ç”¨ç‡æ€¥ä¸Šæ˜‡ã€æœªçŸ¥ãƒ—ãƒ­ã‚»ã‚¹ | ãƒã‚¤ãƒ‹ãƒ³ã‚°æ‹¡å¤§ã‚’é˜²æ­¢ | VPC Flow Logs ã§ C2 ã‚’ç¢ºèª |
| **ãƒ©ãƒ³ã‚µãƒ ã‚¦ã‚§ã‚¢** | ãƒ•ã‚¡ã‚¤ãƒ«æš—å·åŒ–ã€æ‹¡å¼µå­å¤‰æ›´ | åŒä¸€ VPC å†…å…±æœ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ±šæŸ“é˜²æ­¢ | S3 ãƒã‚±ãƒƒãƒˆç‰ˆ Versioning & MFA Delete |
| **Credential Dumping** | ç•°å¸¸ãª IAM API ã‚³ãƒ¼ãƒ« | è³‡æ ¼æƒ…å ±å†åˆ©ç”¨é˜²æ­¢ | IAM Access Analyzer ã§æ¨©é™ç¢ºèª |

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Termination Protection ãŒæœ‰åŠ¹  
- [ ] éš”é›¢ SG ã«ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ 0.0.0.0/0 Deny ç›¸å½“ã‚’è¨­å®š  
- [ ] Run Command å®Ÿè¡Œãƒ­ã‚°ãŒ CloudTrail ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹  
- [ ] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒæš—å·åŒ–ã•ã‚Œã€ã‚¿ã‚°ã§æ¤œç´¢å¯èƒ½  
- [ ] è¨¼æ‹ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ S3 ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚° + ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä¿è­·  

---

ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã‚Šã€**EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åœæ­¢ã›ãš**ã«è¨¼æ‹ ä¿å…¨ãƒ»éš”é›¢ãƒ»èª¿æŸ»ã‚’è¿…é€Ÿã‹ã¤å†ç¾æ€§é«˜ãå®Ÿè¡Œã§ãã¾ã™ã€‚  
Security ãƒãƒ¼ãƒ ã¯æœ€å°ã®é‹ç”¨è² è·ã§ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œã‚’æ¨™æº–åŒ–ã—ã€ç›£æŸ»ã«ã‚‚è€ãˆã†ã‚‹è¨¼è·¡ã‚’æ®‹ã›ã¾ã™ã€‚ğŸ’¡

---

## â“ ãªãœ **Systems Manager Run Command** ã‚’ä½¿ç”¨ã—ã¦æ®ç™ºæ€§ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã™ã‚‹ã®ã‹

### Run Command ã®ãƒ¡ãƒªãƒƒãƒˆ
| ãƒã‚¤ãƒ³ãƒˆ | ç†ç”± |
|----------|------|
| **ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ãƒãƒ¼ãƒˆä¸è¦** | SSM Agent ã¯ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ 443 ã®ã¿ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ä¾µå®³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«æ–°ãŸãªç©´ã‚’é–‹ã‘ãšã«æ¸ˆã‚€ã€‚ |
| **å®Œå…¨ãªç›£æŸ»è¨¼è·¡** | Run Command ã®å®Ÿè¡Œå†…å®¹ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ»çµæœã¯ CloudTrail ã¨ SSM Execution Logs ã«è‡ªå‹•ã§æ®‹ã‚‹ã€‚å¾Œã‹ã‚‰â€œèª°ãŒä½•ã‚’ã—ãŸã‹â€ã‚’è¨¼æ˜ã—ã‚„ã™ã„ã€‚ |
| **è‡ªå‹•åŒ–ãƒ»å†ç¾æ€§** | ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã—ã¦å†åˆ©ç”¨ã§ãã€ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æ‰‹ä½œæ¥­ãƒŸã‚¹ã‚’æ’é™¤ã€‚ |
| **IAM Least Privilege** | `ssm:SendCommand` ç­‰ã€å¿…è¦æœ€å°é™ã® API æ¨©é™ã®ã¿ä»˜ä¸ã™ã‚Œã°ã‚ˆã„ã€‚ |
| **å¤š OS å¯¾å¿œ** | Linuxï¼Windowsï¼macOSï¼ˆSSM Agent å¯¾å¿œï¼‰ã‚’åŒä¸€ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã§æ“ä½œã€‚ |

### D. ãªãœ **SSH / RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³** ã§ã¯ãªã„ã®ã‹
| èª²é¡Œ | SSH/RDP ãŒä¸é©åˆ‡ãªç†ç”± |
|------|----------------------|
| **è¿½åŠ ã®ãƒãƒ¼ãƒˆé–‹æ”¾** | ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ 22/3389 ã‚’ä¸€æ™‚ã§ã‚‚é–‹ã‘ã‚‹ã¨ã€æ”»æ’ƒè€…ãŒæ¨ªå±•é–‹ã™ã‚‹ãƒªã‚¹ã‚¯ãŒå¢—å¤§ã€‚ |
| **è¨¼è·¡ã®æŠœã‘æ¼ã‚Œ** | ã‚·ã‚§ãƒ«æ“ä½œã¯ OS ãƒ­ã‚°ã«æ®‹ã‚‰ãªã„ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚ã‚Šã€åˆ¥é€”ã‚»ãƒƒã‚·ãƒ§ãƒ³éŒ²ç”»ã‚’ç”¨æ„ã—ãªã„ã¨å®Œå…¨ãªç›£æŸ»ãŒé›£ã—ã„ã€‚ |
| **æ‰‹ä½œæ¥­ãƒŸã‚¹** | ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ã‚¿ã‚¤ãƒã‚„èª¤æ“ä½œãŒæ®ç™ºæ€§ãƒ¡ãƒ¢ãƒªã‚’ä¸Šæ›¸ãã—ã€è¨¼æ‹ æ±šæŸ“ã®æã‚Œã€‚ |
| **éµãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†** | ä¾µå®³æ¸ˆã¿ã‚µãƒ¼ãƒã«æ–°éµã‚’é€ã‚Šè¾¼ã‚€æ‰‹é–“ã€ã‚ã‚‹ã„ã¯æ—¢å­˜éµãŒç›—ã¾ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã€‚ |
| **é‹ç”¨ã‚³ã‚¹ãƒˆ** | Bastion æ§‹ç¯‰ã‚„è¸ã¿å°çµŒç”±ãªã©ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­è¨ˆãŒè¤‡é›‘åŒ–ã™ã‚‹ã€‚ |

---

## â“ ãªãœ **F. State Manager Association** ã‚’ä½¿ã‚ãšã€**E. create-snapshot** ã‚’æ¡ç”¨ã™ã‚‹ã®ã‹

| è¦³ç‚¹ | E. ç›´ã¡ã« snapshot ä½œæˆ (CLI/Run Command) | F. State Manager Association |
|------|------------------------------------------|------------------------------|
| **ç›®çš„é©åˆæ€§** | ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆæ™‚ã® â€œä¸€å›é™ã‚Šâ€ ã®è¨¼æ‹ ä¿å…¨ã«æœ€é© | å®šæœŸçš„ãªè¨­å®šãƒ‰ãƒªãƒ•ãƒˆä¿®æ­£ã‚„ãƒ‘ãƒƒãƒé©ç”¨å‘ã‘ |
| **ä½œæ¥­ã‚¹ãƒ”ãƒ¼ãƒ‰** | æ•°ç§’ã§å®Ÿè¡Œå¯ã€‚ãƒˆãƒªã‚¢ãƒ¼ã‚¸ä¸­ã«å³æ™‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ | Association ä½œæˆ â†’ é©ç”¨ã¾ã§ã‚¿ã‚¤ãƒ ãƒ©ã‚°ãŒã‚ã‚‹ |
| **è¨­å®šã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰** | CLI ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ or Run Command ã§å®Œçµ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®šã€Schedule è¨­å®šãŒå¿…è¦ |
| **ä¾µå®³ãƒªã‚¹ã‚¯** | Snapshot API ã ã‘ã®æœ€å°æ¨©é™ã§æ¸ˆã‚€ | `ssm:CreateAssociation` ãªã©è¿½åŠ æ¨©é™ãŒå¿…è¦ |
| **é‹ç”¨å¯¾è±¡** | ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œãƒãƒ¼ãƒ ã ã‘ãŒå®Ÿè¡Œ | Ops ãƒãƒ¼ãƒ ã® System ç®¡ç†ãƒ•ãƒ­ãƒ¼ã¨è¡çªã®å¯èƒ½æ€§ |

> **çµè«–**:  
> - **Run Command** ã¯ã€Œä¸€æ™‚çš„ãƒ»ç·Šæ€¥ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã€ã«æœ€é©ã€‚  
> - **State Manager** ã¯ã€Œç¶™ç¶šçš„ãƒ»ãƒãƒªã‚·ãƒ¼ãƒ™ãƒ¼ã‚¹æ§‹æˆç®¡ç†ã€ã«é©ã—ã€ä»Šå›ã®ç”¨é€”ã§ã¯ã‚ªãƒ¼ãƒãƒ¼ã‚¹ãƒšãƒƒã‚¯ã€‚  

---

ã“ã‚Œã§ã€ãªãœé¸æŠè‚¢ **C (Run Command)** ãŒæ¨å¥¨ã•ã‚Œã€**D ã¨ F ãŒæ¡ç”¨ã•ã‚Œãªã„**ã‹ã¾ã§å«ã‚ã¦ã€è¨­è¨ˆæ„å›³ã‚’ç¶²ç¾…çš„ã«æ–‡æ›¸åŒ–ã§ãã¾ã—ãŸã€‚  

---

## âŒ ãªãœã‚ªãƒ—ã‚·ãƒ§ãƒ³ **B / D / F** ã¯æœ€é©ã§ã¯ãªã„ã®ã‹ï¼Ÿ

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ B: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’éš”é›¢ã‚µãƒ–ãƒãƒƒãƒˆã«ç§»å‹•
- ç›®çš„ã¯ã€Œã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚’ç¶­æŒã—ã¤ã¤éš”é›¢ã€ã€‚  
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã‚’æ›´æ–° (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ A)** ã™ã‚‹ã ã‘ãªã‚‰ã€IPãƒ»EIPãƒ»ãƒ«ãƒ¼ãƒˆè¨­å®šã‚’å¤‰ãˆãšã«æ¸ˆã¿ã€å¤‰æ›´ç¯„å›²ãŒç‹­ãã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒæœ€å°ã€‚  
- ã‚µãƒ–ãƒãƒƒãƒˆç§»å‹•ã¯ **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ IP ã®å¤‰æ›´**ã€Elastic IP å†å‰²å½“ã¦ã€ãƒ«ãƒ¼ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«è¦‹ç›´ã—ç­‰ãŒç™ºç”Ÿã—ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¾å­˜ã®ã‚¢ãƒ—ãƒªã§ã¯ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ã‚„è¨­å®šä¿®æ­£ãŒå¿…è¦ã«ãªã‚‹ã€‚  
- Auto Scaling / ELB çµ„ã¿è¾¼ã¿ã®å ´åˆã€ç§»å‹•å¾Œã«å†ç™»éŒ²ãŒå¿…è¦ã«ãªã‚‹ãªã©æ‰‹é †ãŒç…©é›‘ã€‚  
- **æœ€å°ã®é‹ç”¨è² è·** ã¨ã„ã†è¦æ±‚ã‹ã‚‰ã¯ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ B ã‚ˆã‚Š A ãŒå„ªã‚Œã‚‹ã€‚

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ D: SSH / RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
- ä¼šç¤¾ã¯ã™ã§ã« **AWS Systems Manager** ã‚’å°å…¥ã—ã¦ãŠã‚Šã€SSM Agent ãŒå…¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ç¨¼åƒä¸­ã€‚  
- éš”é›¢å¾Œã¯ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ã¯é–‰ã˜ã‚‹ãŸã‚ã€SSH/RDP ãƒãƒ¼ãƒˆã‚’å†åº¦é–‹ã‘ã‚‹ã®ã¯æœ¬æœ«è»¢å€’ã€‚  
- ã‚­ãƒ¼ï¼ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ã€è¸ã¿å°ãƒ›ã‚¹ãƒˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³éŒ²ç”»ã®æ•´å‚™ãªã© **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨é‹ç”¨ã‚³ã‚¹ãƒˆ** ãŒé«˜ã„ã€‚  
- Run Command ã¯ **ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ 443 ã®ã¿** ã§æ¸ˆã¿ã€CloudTrail ã«ãƒ•ãƒ«ç›£æŸ»è¨¼è·¡ãŒæ®‹ã‚‹ã€‚  
- ã‚ˆã£ã¦ã€åŒã˜ç›®çš„ã§ã‚ã‚Œã° **C (Run Command)** ãŒ D ã‚ˆã‚Šã‚‚å®‰å…¨ã‹ã¤ä½ã‚³ã‚¹ãƒˆã€‚

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³ F: State Manager Association ã§ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆç”Ÿæˆ
- **State Manager** ã¯â€œæŒç¶šçš„æ§‹æˆç®¡ç†â€ç”¨ã‚µãƒ¼ãƒ“ã‚¹ã€‚å®šæœŸãƒ‘ãƒƒãƒé©ç”¨ã‚„ãƒ‰ãƒªãƒ•ãƒˆä¿®æ­£ãŒä¸»ç”¨é€”ã€‚  
- ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œã¯ **å˜ç™ºãƒ»å³æ™‚å®Ÿè¡Œ** ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚Association ã‚’ä½œæˆâ†’é©ç”¨â†’å‰Šé™¤ã®æµã‚Œã¯å†—é•·ã€‚  
- è¿½åŠ  IAM æ¨©é™ (`ssm:CreateAssociation` ç­‰) ãŒå¿…è¦ã§æ”»æ’ƒé¢ã‚’åºƒã’ã¦ã—ã¾ã†ã€‚  
- **E (ç›´æ¥ create-snapshot + ã‚¿ã‚°ä»˜ã‘)** ã¯ API ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§å®Œçµã—ã€ãƒã‚±ãƒƒãƒˆç•ªå·ã‚¿ã‚°ã‚’å³æ™‚ã«æ®‹ã›ã‚‹ã€‚  
- ã—ãŸãŒã£ã¦ F ã¯æœ¬ã‚·ãƒŠãƒªã‚ªã§ã¯éå‰°è¨­è¨ˆã§ã‚ã‚Šã€é‹ç”¨ä¸Šã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒå¤§ãã„ã€‚

---

> **çµè«–:**  
> - **æœ€å°ã®é‹ç”¨è² è·ã¨æ—¢å­˜ SSM æ´»ç”¨** ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã€æ¨å¥¨ã¯ **A + C + E**ã€‚  
> - **B / D / F** ã¯ç›®çš„ã¯æº€ãŸã›ã‚‹ã‚‚ã®ã®ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¹ã‚¯ãƒ»ç›£æŸ»æ€§ãƒ»æ‰‹é †ã®è¤‡é›‘ã•ã®ç‚¹ã§ç›¸å¯¾çš„ã«åŠ£ã‚‹ã€‚

---

## ğŸ“š è£œè¶³ï¼šRDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯ï¼ŸRun Command / State Manager ã®ä»£è¡¨çš„ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### ğŸ”¹ RDP ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨ã¯
- **Remote Desktop Protocol (RDP)** ã¯ã€Windows OS ã«æ¨™æº–æ­è¼‰ã•ã‚Œã¦ã„ã‚‹ GUI ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶šãƒ—ãƒ­ãƒˆã‚³ãƒ«ã€‚  
- **ç”¨é€”ä¾‹**  
  1. Windows ã‚µãƒ¼ãƒã® GUI è¨­å®šå¤‰æ›´ã‚„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ“ä½œ  
  2. ãƒ˜ãƒ«ãƒ—ãƒ‡ã‚¹ã‚¯ãŒã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ PC ã‚’é éš”ã‚µãƒãƒ¼ãƒˆ  
  3. ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸãƒ­ã‚°/ã‚¤ãƒ™ãƒ³ãƒˆãƒ“ãƒ¥ãƒ¼ãƒ¯ç¢ºèª  

> ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œã§ã¯ CLI ã‚ˆã‚Šæ“ä½œãŒé‡ãã€ãƒãƒ¼ãƒˆ 3389/TCP ã‚’é–‹ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚éš”é›¢ä¸­ã®ãƒã‚·ãƒ³ã«ã¯æ¨å¥¨ã•ã‚Œãªã„ã€‚

---

### ğŸ”¹ Run Command ãŒæ´»èºã™ã‚‹ãã®ä»–ã‚·ãƒŠãƒªã‚ª
| ã‚·ãƒŠãƒªã‚ª | ä¾‹ |
|----------|----|
| **ç¶™ç¶šçš„ãªãƒ‘ãƒƒãƒé©ç”¨å‰ãƒ†ã‚¹ãƒˆ** | é¸æŠã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã ã‘ãƒ‘ãƒƒãƒæ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å³æ™‚å®Ÿè¡Œ |
| **ãƒ­ã‚°åé›† / ãƒ•ã‚¡ã‚¤ãƒ«è»¢é€** | `aws s3 cp` ã‚³ãƒãƒ³ãƒ‰ã§å¤§é‡ãƒ­ã‚°ã‚’ S3 ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |
| **ãƒ¦ãƒ¼ã‚¶å®šç¾©ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†** | ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ«ã§ CPU/IO è©³ç´°ã‚’è¨ˆæ¸¬ã— CloudWatch ã¸é€ä¿¡ |
| **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ** | Web ã‚µãƒ¼ãƒãƒ—ãƒ­ã‚»ã‚¹ã‚’å…¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã§ä¸€æ–‰ã«å†èµ·å‹• |
| **ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªãƒã‚§ãƒƒã‚¯** | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ Greengrass é¢¨ã«ä¸€è¦§åŒ– |

---

### ğŸ”¹ Systems Manager **State Manager** ã®ä¸»ãªç”¨é€”
| ç”¨é€” | å…·ä½“ä¾‹ |
|------|--------|
| **æ§‹æˆãƒ‰ãƒªãƒ•ãƒˆé˜²æ­¢** | `AWS-ApplyPatchBaseline` ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ¯æ—¥ 2:00 JST ã«é©ç”¨ã—ã€æœ€æ–°ãƒ‘ãƒƒãƒã‚’å¼·åˆ¶ |
| **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¸¸é§** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚ŒãŸã‚‰è‡ªå‹•å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| **ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ¬ã‚¸ã‚¹ãƒˆãƒªç›£è¦–** | ç‰¹å®šè¨­å®šãŒå¤‰æ›´ã•ã‚ŒãŸéš›ã«è‡ªå‹•ã§å…ƒã«æˆ»ã™ |
| **æ§‹æˆãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³éµå®ˆ** | CIS Benchmarks è¨­å®šã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã—ã€é•åãŒã‚ã‚Œã°è‡ªå‹•ä¿®å¾© |

#### Association ã‚’ä½œæˆã™ã‚‹ã¨ã¯ï¼Ÿ
- **Association = ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ + ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« + ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** ã®ã‚»ãƒƒãƒˆã€‚  
- â€œã“ã® Runbook ã‚’â—‹æ™‚ã« / ã“ã®ã‚¿ã‚°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¸ / ã“ã®é »åº¦ã§å®Ÿè¡Œâ€ ã¨ã„ã† **ãƒãƒªã‚·ãƒ¼** ã‚’å®šç¾©ã™ã‚‹ã‚‚ã®ã€‚  
- â†’ **ä¸€åº¦ãã‚Šã®ã‚¿ã‚¹ã‚¯** ã§ã¯ãªãã€**ç¶™ç¶šçš„ã‹ã¤è‡ªå‹•ã§æ‰€å®šã®çŠ¶æ…‹ã«ä¿ã¤** ãŸã‚ã®ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã€‚

---
